 主从复制在3.2.3版本开始提供，复制是指主数据库master的DDL和DML操作通过**二进制日志传**到从数据库上slave，然后从库上对这些日志重新执行一遍
 支持一主多从，从也可以作为其他服务器的主库，实现链式复制
 
 
 **优点：**
 
 1.主库出现问题，可以快速切换到从库
 
 2.从库上执行查询，降低主库访问量
 
 3.在从库上执行备份，降低备份期间主库的压力
 
## 目录
* [搭建](#搭建)

# 搭建
  1.确保主从安装了相同版本的数据库
  
  2.主句上执行
```
 mysql>grant replication slave on *.* to test@192.168.124.10 identified "123456";
 mysql>show grants for zhu@192.168.124.10;
 mysql>select * from mysql.user\G
```
 其中grant是给master服务器创建一个有复制权限的账户test，授权ip是slave的192.169.124.10，对所有库所有库、所有表都有权限，密码是123456

 可以通过show grants语句查看test用户的权限，也可以通过mysql库的user表来查看，Repl_slave_priv被赋予了Y
 
  3.开启master的binlog，并且设置server_id
```
 mysql>show variables like "log_bin%";
 mysql>show variables like "server_id";
```
  4.主库上设置读锁定有效，为了确保有没数据库写操作，以便获得一个一致性快照，所有在master的写操作都会报错，直到锁释放
```
 mysql>flush tables with read lock;
 mysql>insert into a value(2);
 ERROR 1223(HY000):Can't execute the query because you have a conflicting read lock
```
  5.得到master的二进制日志名和偏移量
```
 mysql>show master status;
```
 得到File、Position，就是从File这个二进制文件的偏移量Position开始给从复制
  6.主数据库现在已经停止了更新操作，需要生成主库的数据备份
```
 mysql>show variables like "datadir";
```
 直接进压缩datadir目录
  7.将主库的一致性备份恢复到从库上，可以直接解压到从库的datadir目录上
